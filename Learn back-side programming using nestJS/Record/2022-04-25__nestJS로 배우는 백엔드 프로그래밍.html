<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/themes/prism.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@6.7.0"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.2.7"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/index.umd.min.js"></script><script>(r => {
                setTimeout(r);
              })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, data) => {
        const {
          Markmap
        } = getMarkmap();
        window.mm = Markmap.create('svg#mindmap', getOptions == null ? void 0 : getOptions(), data);
      })(() => window.markmap,null,{"t":"heading","d":1,"p":{"lines":[0,1]},"v":"nestJS로 배우는 백엔드 프로그래밍","c":[{"t":"heading","d":2,"p":{"lines":[1,2]},"v":"들어가기 전에","c":[{"t":"fence","d":3,"v":"<pre><code>백엔드를 개발할 때 express로 개발하고 있으나 흔히 백엔드에서 사용되는 DI, AOP, IoC, 테스트 등을 다루지 못하였다. \n백엔드 아키텍쳐에 관련된 개념을 찾아보다가 Spring의 구조가 잘 구조화 되어있다고 느꼈으나 구름의 어플리케이션 전반은 js로 짜여져있으므로 너무 동떨어진 느낌이었다고 느꼈는데 nestJS가 spring js 판이라고 할 수 있을 정도로 유사하며, 잘 짜여진 아키텍쳐 위에서 동작한다고 느껴서 nestJS를 통하여 백엔드 아키텍쳐를 학습해보고자 한다.\n본 서적은 기본 개념부터 알려주므로 이미 알고 있는 개념의 챕터는 무시하며 독서할 것이다. \n</code></pre>\n"}]},{"t":"heading","d":2,"p":{"lines":[8,9]},"v":"Hello NestJS","c":[{"t":"heading","d":3,"p":{"lines":[9,10]},"v":"Express vs NestJS","c":[{"t":"list_item","d":5,"p":{"lines":[10,11]},"v":"Express","c":[{"t":"list_item","d":7,"p":{"lines":[11,12]},"v":"가볍게 테스트 서버를 띄울 수 있음."},{"t":"list_item","d":7,"p":{"lines":[12,13]},"v":"확장되는 라이브러리를 찾는 데에 코스트가 많이 소비됨"},{"t":"list_item","d":7,"p":{"lines":[13,14]},"v":"커뮤니티가 가장 많이 활성화 되어있음."},{"t":"list_item","d":7,"p":{"lines":[14,15]},"v":"자유도가 매우 높은 편."}]},{"t":"list_item","d":5,"p":{"lines":[15,16]},"v":"NestJS","c":[{"t":"list_item","d":7,"p":{"lines":[16,17]},"v":"alemfdnpdj, IoC, CQRS등 이미 많은 기능을 프레임워크 자체에 탑재."},{"t":"list_item","d":7,"p":{"lines":[17,18]},"v":"사용자는 문서로부터 대부분의 기능을 구현할 수 있음."},{"t":"list_item","d":7,"p":{"lines":[18,19]},"v":"ME: 진입장벽이 높은 편인 듯"}]}]}]},{"t":"heading","d":2,"p":{"lines":[20,21]},"v":"NestJS를 배우기 전에","c":[{"t":"heading","d":3,"p":{"lines":[21,22]},"v":"웹 프레임워크","c":[{"t":"list_item","d":5,"p":{"lines":[22,23]},"v":"웹 개발을 하는데에 필요한 골조 역할"},{"t":"list_item","d":5,"p":{"lines":[23,24]},"v":"ME: 그냥 쉽게 웹 + 프레임워크"}]},{"t":"heading","d":3,"p":{"lines":[24,25]},"v":"NodeJS","c":[{"t":"list_item","d":5,"p":{"lines":[25,26]},"v":"단일 쓰레드에서 구동되는 non-blocking I/O 이벤트 기반 비동기 방식","c":[{"t":"bullet_list","d":6,"p":{"lines":[26,28]},"v":"","c":[{"t":"list_item","d":7,"p":{"lines":[26,27]},"v":"백그라운드에서는 쓰레드 풀을 구성해서 작업을 처리함."},{"t":"list_item","d":7,"p":{"lines":[27,28]},"v":"개발자가 직접 쓰레드 풀을 건드리지는 않고 NodeJS에 탑재된 libuv가 그 역할을 수행함"}]},{"t":"blockquote","d":6,"p":{"lines":[28,29]},"v":"","c":[{"t":"paragraph","d":7,"p":{"lines":[28,29]},"v":"<b>*libuv</b>: NodeJS에서 사용하는 비동기 IO 라이브러리. C 기반이며 OS 커널을 사용하여 처리할 수 있는 비동기 작업이 있으면 바로 커널로 넘겨버림. 이 후 작업이 종료되어 커널로부터 시스템 콜 받으면 이벤트 루프에 콜백을 등록."}]}]}]},{"t":"heading","d":3,"p":{"lines":[29,30]},"v":"이벤트 루프","c":[{"t":"list_item","d":5,"p":{"lines":[30,31]},"v":"ME: <b>해당 장은 깊숙히 다룰 필요가 있으므로 지금은 스킵함 2022.03.30</b>"}]},{"t":"heading","d":3,"p":{"lines":[31,32]},"v":"패키지 의존성 관리","c":[{"t":"list_item","d":5,"p":{"lines":[32,33]},"v":"npm은 Semantic Version Rules을 따른다.","c":[{"t":"list_item","d":7,"p":{"lines":[33,34]},"v":"<code>[Major].[Minor].[Patch]-[label]</code> 로 구분된다.","c":[{"t":"list_item","d":9,"p":{"lines":[34,35]},"v":"<code>label</code>을 제외한 <code>Major</code>, <code>Minor</code>, <code>Patch</code>는 숫자로 표기된다."},{"t":"list_item","d":9,"p":{"lines":[35,36]},"v":"<code>Major</code> : 이전 버전과 호환이 불가능할 때 숫자를 하나 증가시킴.","c":[{"t":"list_item","d":11,"p":{"lines":[36,37]},"v":"ME: 예를 들면 osX 카탈리나 -&gt; 몬터레이로 이해 됨."}]},{"t":"list_item","d":9,"p":{"lines":[37,38]},"v":"<code>Minor</code>: 기능이 추가되는 경우 숫자가 증가됨. 하위 호환성을 깨트리지 않음."},{"t":"list_item","d":9,"p":{"lines":[38,39]},"v":"<code>Patch</code>: 버그 수정 패치"},{"t":"list_item","d":9,"p":{"lines":[39,40]},"v":"<code>label</code>: pre, alpha, beta와 같이 부가 설명을 표기함."}]}]},{"t":"list_item","d":5,"p":{"lines":[40,41]},"v":"package-json 분석","c":[{"t":"list_item","d":7,"p":{"lines":[41,42]},"v":".skip"}]},{"t":"list_item","d":5,"p":{"lines":[42,43]},"v":"package.lock","c":[{"t":"list_item","d":7,"p":{"lines":[43,44]},"v":".skip"}]}]},{"t":"heading","d":3,"p":{"lines":[45,46]},"v":"Typescript","c":[{"t":"list_item","d":5,"p":{"lines":[46,47]},"v":".skip"}]},{"t":"heading","d":3,"p":{"lines":[48,49]},"v":"Decorator","c":[{"t":"heading","d":4,"p":{"lines":[50,51]},"v":"데코레이터","c":[{"t":"bullet_list","d":5,"p":{"lines":[51,54]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[51,52]},"v":"실험적 단계이나, 안정적이므로 실제 서비스에서 많이 사용된다."},{"t":"list_item","d":6,"p":{"lines":[52,53]},"v":"자바의 어노테이션과 유사(ME: 거의 동일한 듯)"},{"t":"list_item","d":6,"p":{"lines":[53,54]},"v":"클래스, 메서드, 접근자, 프로퍼티, 매개변수에 적용 가능하다."}]},{"t":"heading","d":5,"p":{"lines":[54,55]},"v":"다음과 같이 적용 가능하다.","c":[{"t":"fence","d":6,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CreateUserDto</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">IsEmail</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">readonly</span> email<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"t":"heading","d":5,"p":{"lines":[61,62]},"v":"데코레이터 작성","c":[{"t":"fence","d":6,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">deco</span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'데코레이터가 평가됨'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>target<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> propertyKey<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> descriptor<span class=\"token operator\">:</span> PropertyDescriptor<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">TestClass</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">deco</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'HELLO'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'함수 호출됨'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// 데코레이터가 평가됨</span>\n<span class=\"token comment\">// HELLO</span>\n<span class=\"token comment\">// 함수 호출됨</span>\n</code></pre>\n"}]},{"t":"heading","d":5,"p":{"lines":[81,82]},"v":"데코레이터 합성","c":[{"t":"fence","d":6,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"first(): factory evaluated\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>target<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> propertyKey<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> descriptor<span class=\"token operator\">:</span> PropertyDescriptor<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"first(): called\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">second</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"second(): factory evaluated\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>target<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> propertyKey<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> descriptor<span class=\"token operator\">:</span> PropertyDescriptor<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"second(): called\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ExampleClass</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">first</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">second</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">method</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'method is called'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// first(): factory evaluated</span>\n<span class=\"token comment\">// second(): factory evaluated</span>\n<span class=\"token comment\">// second(): called</span>\n<span class=\"token comment\">// first(): called</span>\n<span class=\"token comment\">// method is called</span>\n</code></pre>\n"},{"t":"bullet_list","d":6,"p":{"lines":[110,113]},"v":"","c":[{"t":"list_item","d":7,"p":{"lines":[110,111]},"v":"first와 second는 평가, return되는 값은 호출이라고 칭한다."},{"t":"list_item","d":7,"p":{"lines":[111,112]},"v":"평가는 위에서 아래순으로, 호출은 아래에서 위로 호출되는 것을 알 수 있다."}]}]}]}]}]},{"t":"heading","d":2,"p":{"lines":[113,114]},"v":"애플리케이션의 관문 - 인터페이스","c":[{"t":"heading","d":3,"p":{"lines":[114,115]},"v":"컨트롤러","c":[{"t":"bullet_list","d":4,"p":{"lines":[115,117]},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[115,116]},"v":"MVC 패턴에서 말하는 컨트롤러를 말한다."},{"t":"list_item","d":5,"p":{"lines":[116,117]},"v":".skip"}]},{"t":"heading","d":4,"p":{"lines":[117,118]},"v":"라우팅","c":[{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Controller<span class=\"token punctuation\">,</span> Get <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@nestjs/common'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AppService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./app.service'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Controller</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppController</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> appService<span class=\"token operator\">:</span> AppService<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Get</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">getHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>appService<span class=\"token punctuation\">.</span><span class=\"token function\">getHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[132,135]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[132,133]},"v":"위와 같은 구조를 가진다."},{"t":"list_item","d":6,"p":{"lines":[133,134]},"v":"데코레이터를 적극 활용함으로써 개발자는 핵심 로직에만 집중할 수 있도록 도와준다."}]}]},{"t":"heading","d":4,"p":{"lines":[135,136]},"v":"와일드 카드","c":[{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Get</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'he*lo'</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">getHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>appService<span class=\"token punctuation\">.</span><span class=\"token function\">getHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[142,145]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[142,143]},"v":"위와 같이 <code>*</code>를 사용하여 문자열을 대체할 수 있음."},{"t":"list_item","d":6,"p":{"lines":[143,144]},"v":"이건 비단 라우팅 뿐 아니라 컴포넌트에서 이름 정할 때에도 쓰임."}]}]},{"t":"heading","d":4,"p":{"lines":[145,146]},"v":"요청 객체","c":[{"t":"list_item","d":6,"p":{"lines":[146,147]},"v":"Express처럼 라우터 파라메터에 <code>Req() req:Request</code>와 같이 req에 접근할 수 있다."},{"t":"list_item","d":6,"p":{"lines":[147,148]},"v":"ME: 이는 NestJS가 Express 위에서 동작하기 때문에 Express의 기능들을 열어두었기 때문이다."}]},{"t":"heading","d":4,"p":{"lines":[149,150]},"v":"응답","c":[{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Get</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Res</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> res<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> users <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>usersService<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// 위는 Express방식으로 응답해주는 형태이나 NestJS에서는 다음과 같이 응답하길 권장함.</span>\n<span class=\"token comment\">// 우리 구름도 위와 같은 형태.</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> HttpCode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@nestjs/common'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">HttpCode</span></span><span class=\"token punctuation\">(</span><span class=\"token number\">202</span><span class=\"token punctuation\">)</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Patch</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">':id'</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Param</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">)</span> id<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Body</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> updateUserDto<span class=\"token operator\">:</span> UpdateUserDto<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>usersService<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span>id<span class=\"token punctuation\">,</span> updateUserDto<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[167,176]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[167,168]},"v":"각 성공 상태 코드","c":[{"t":"list_item","d":8,"p":{"lines":[168,169]},"v":"200","c":[{"t":"list_item","d":10,"p":{"lines":[169,170]},"v":"서버가 요청을 제대로 처리하였음."}]},{"t":"list_item","d":8,"p":{"lines":[170,171]},"v":"201","c":[{"t":"list_item","d":10,"p":{"lines":[171,172]},"v":"성공적으로 요청되었으며 새 리소스가 생성됨. 주로 Post로 보낼 때 반환 됨."}]},{"t":"list_item","d":8,"p":{"lines":[172,173]},"v":"202","c":[{"t":"list_item","d":10,"p":{"lines":[173,174]},"v":"일단 요청은 성공됨. 그런데 아직 처리할 방법이 없거나 처리 중임."},{"t":"list_item","d":10,"p":{"lines":[174,175]},"v":"ME: 요청는건 성공하였으나 결과는 서버도 모르니까 보장할 수 없다는 뜻."}]}]}]}]},{"t":"heading","d":4,"p":{"lines":[176,177]},"v":"헤더","c":[{"t":"list_item","d":6,"p":{"lines":[177,178]},"v":".skip"}]},{"t":"heading","d":4,"p":{"lines":[179,180]},"v":"리디렉션","c":[{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Get</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'redirect/docs'</span><span class=\"token punctuation\">)</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Redirect</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://docs.nestjs.com'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">302</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">getDocs</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Query</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'version'</span><span class=\"token punctuation\">)</span> version<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>version <span class=\"token operator\">&amp;&amp;</span> version <span class=\"token operator\">===</span> <span class=\"token string\">'5'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> url<span class=\"token operator\">:</span> <span class=\"token string\">'https://docs.nestjs.com/v5/'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[189,192]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[189,190]},"v":"<code>http://localhost:3000/redirect/docs?version=5</code> 를 입력하면 <code>https://docs.nestjs.com/v5/</code> 페이지로 이동됨"},{"t":"list_item","d":6,"p":{"lines":[190,191]},"v":"<code>302</code>는 상태코드(임시 이동)임."}]}]},{"t":"heading","d":4,"p":{"lines":[192,193]},"v":"라우트 파라미터","c":[{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Delete</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">':userId/memo/:memoId'</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">deleteUserMemo</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Param</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> params<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">userId: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>params<span class=\"token punctuation\">.</span>userId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, memoId: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>params<span class=\"token punctuation\">.</span>memoId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[199,201]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[199,200]},"v":"객체 형태로 파라메터를 받는 방법."},{"t":"list_item","d":6,"p":{"lines":[200,201]},"v":"권장되지는 않음."}]},{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Delete</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">':userId/memo/:memoId'</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">deleteUserMemo</span><span class=\"token punctuation\">(</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Param</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'userId'</span><span class=\"token punctuation\">)</span> userId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Param</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'memoId'</span><span class=\"token punctuation\">)</span> memoId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">userId: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>userId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, memoId: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>memoId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[210,211]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[210,211]},"v":"위와 같이 작성하는 것을 권장함."}]}]},{"t":"heading","d":4,"p":{"lines":[211,212]},"v":"하위 도메인 라우팅","c":[{"t":"bullet_list","d":5,"p":{"lines":[212,213]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[212,213]},"v":"<code>etc/hosts</code>에서 도메인을 추가한다."}]},{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token operator\">...</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span> api<span class=\"token punctuation\">.</span>localhost\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span> v1<span class=\"token punctuation\">.</span>api<span class=\"token punctuation\">.</span>localhost\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[218,219]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[218,219]},"v":"그리고 Controller에서 하위 도메인을 처리한다."}]},{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Controller</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> host<span class=\"token operator\">:</span> <span class=\"token string\">'api.localhost'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// localhost로 변경</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ApiController</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Get</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Hello, API'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[228,229]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[228,229]},"v":"또한 params를 활용하여 버저닝을 적용할 수도 있다."}]},{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Controller</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> host<span class=\"token operator\">:</span> <span class=\"token string\">':version.api.localhost'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ApiController</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Get</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">HostParam</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'version'</span><span class=\"token punctuation\">)</span> version<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello, API </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>version<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"t":"heading","d":4,"p":{"lines":[238,239]},"v":"페이로드 다루기","c":[{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// createUser.dto.ts</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CreateUserDto</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  email<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// users.controller.ts</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Post</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Body</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> createUserDto<span class=\"token operator\">:</span> CreateUserDto<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> email <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> createUserDto<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">유저를 생성했습니다. 이름: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, 이메일: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>email<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[253,256]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[253,254]},"v":"DTO는 raw data를 객체화시킬 때 사용 된다."},{"t":"list_item","d":6,"p":{"lines":[254,255]},"v":"db에서의 데이터나 클라이언트와 교신 시 데이터 등에서 가공시킬 때 사용된다."}]}]}]},{"t":"heading","d":3,"p":{"lines":[256,257]},"v":"유저 서비스의 인터페이스","c":[{"t":"bullet_list","d":4,"p":{"lines":[257,258]},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[257,258]},"v":"DTD의 쓰임새를 느낄 수 있는 코드는 다음과 같다."}]},{"t":"fence","d":4,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Body<span class=\"token punctuation\">,</span> Controller<span class=\"token punctuation\">,</span> Get<span class=\"token punctuation\">,</span> Param<span class=\"token punctuation\">,</span> Post<span class=\"token punctuation\">,</span> Query <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@nestjs/common'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> CreateUserDto <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./dto/create-user.dto'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserLoginDto <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./dto/user-login.dto'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> VerifyEmailDto <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./dto/verify-email.dto'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserInfo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./UserInfo'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Controller</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'users'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UsersController</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Post</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">createUser</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Body</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> dto<span class=\"token operator\">:</span> CreateUserDto<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>dto<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Post</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'/email-verify'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">verifyEmail</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Query</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> dto<span class=\"token operator\">:</span> VerifyEmailDto<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>dto<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Post</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'/login'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Body</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> dto<span class=\"token operator\">:</span> UserLoginDto<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>dto<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Get</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'/:id'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">getUserInfo</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Param</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">)</span> userId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>UserInfo<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"t":"heading","d":3,"p":{"lines":[291,292]},"v":"관점 지향 프로그래밍(AOP)","c":[{"t":"list_item","d":5,"p":{"lines":[292,293]},"v":"관점 지향 프로그래밍은 횡단 관심사의 분리를 허용함으로써 모듈성을 증가시키는 것이 목적인 프로그래밍 패러다임이다."},{"t":"list_item","d":5,"p":{"lines":[293,294]},"v":"ME: 해당 패러다임은 Spring에서 잘 나타나있으므로 Spring 중요한 세 특징으로 찾아봄.","c":[{"t":"list_item","d":7,"p":{"lines":[294,295]},"v":"*<b>횡단 관심사(cross-cutting cencern) : </b> 유효성 검사, 로깅, 보안, 트랜잭션과 같이 앱 내 전반에 걸쳐서 제공되는 공통 요소."}]},{"t":"list_item","d":5,"p":{"lines":[295,296]},"v":"ME: 이해한 바로는 OOP는 유지하되 횡단 관심사를 모듈화시켜서 공통 모듈로 사용한다는 뜻 같음."}]}]},{"t":"heading","d":2,"p":{"lines":[297,298]},"v":"핵심 도메인 로직을 포함하는 프로바이더","c":[{"t":"heading","d":3,"p":{"lines":[298,299]},"v":"Provider","c":[{"t":"bullet_list","d":4,"p":{"lines":[299,306]},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[299,300]},"v":"ME: 컨트롤러는 Goorm의 Router와 같은 역할.","c":[{"t":"list_item","d":7,"p":{"lines":[300,301]},"v":"ME: 비즈니스 로직, 데이터 가공 등을 Router로 처리한다면 너무나 복잡해질 것임. 따라서 각각의 역할을 분리시키고 모듈화해야 함. 단일책임원칙에도 더 잘 어울림."},{"t":"list_item","d":7,"p":{"lines":[301,302]},"v":"예를 들어서"}]},{"t":"list_item","d":5,"p":{"lines":[302,303]},"v":"프로바이더는 서비스(Service), 레포지토리(Repository), 팩토리(Factory), 헬퍼(Helper) 등 여러가지 형태로 구현이 가능.","c":[{"t":"list_item","d":7,"p":{"lines":[303,304]},"v":"ME: 각각의 개념은 소프트웨어 아키텍쳐를 다루는 다른 자료를 참고할 것.","c":[{"t":"list_item","d":9,"p":{"lines":[304,305]},"v":"TODO: 위 아키텍쳐 자료 조사해보기"}]}]},{"t":"list_item","d":5,"p":{"lines":[305,306]},"v":"Nest의 Provider의 핵심은 의존성 주입(DI)임."}]},{"t":"fence","d":4,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// 생성자를 이용한 의존성 주입</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BurgerChef</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> BurgerRecipe burgerRecipe<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token function\">BurgerChef</span><span class=\"token punctuation\">(</span>BurgerRecipe burgerRecipe<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>burgerRecipe <span class=\"token operator\">=</span> burgerRecipe<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BurgerRestaurantOwner</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> BurgerChef burgerChef <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BurgerChef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">HamburgerRecipe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">changeMenu</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        burgerChef <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BurgerChef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CheeseBurgerRecipe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"fence","d":4,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// 메서드를 이용한 의존성 주입</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BurgerChef</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> BurgerRecipe burgerRecipe <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HamburgerRecipe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setBurgerRecipe</span><span class=\"token punctuation\">(</span>BurgerRecipe burgerRecipe<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>burgerRecipe <span class=\"token operator\">=</span> burgerRecipe<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BurgerRestaurantOwner</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> BurgerChef burgerChef <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BurgerChef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">changeMenu</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        burgerChef<span class=\"token punctuation\">.</span><span class=\"token function\">setBurgerRecipe</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CheeseBurgerRecipe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":4,"p":{"lines":[342,349]},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[342,343]},"v":"<strong><em>의존성 주입(중요함)</em></strong>","c":[{"t":"list_item","d":7,"p":{"lines":[343,344]},"v":"ME: 클래스 모델 혹은 코드에는 런타임 시점(인스턴스화 시점)의 의존 관계가 드러나면 안됨.","c":[{"t":"list_item","d":9,"p":{"lines":[344,345]},"v":"즉, 인터페이스로 연결되어야 하며, 의존관계는 제 3자가 클래스 모델이 인스턴스화 될 때 주입해주어야 함."}]},{"t":"list_item","d":7,"p":{"lines":[345,346]},"v":"의존관계 : 의존대상 B가 변하면, 그것이 A에 영향을 미친다."},{"t":"list_item","d":7,"p":{"lines":[346,347]},"v":"클래스 모델이나 코드에는 런타임 시점의 의존관계가 드러나지 않는다. 그러기 위해서는 인터페이스만 의존하고 있어야 한다."},{"t":"list_item","d":7,"p":{"lines":[347,348]},"v":"런타임 시점의 의존관계는 컨테이너나 팩토리 같은 제3의 존재가 결정한다."},{"t":"list_item","d":7,"p":{"lines":[348,349]},"v":"의존관계는 사용할 오브젝트에 대한 레퍼런스를 외부에서 제공(주입)해줌으로써 만들어진다."}]}]}]},{"t":"heading","d":3,"p":{"lines":[349,350]},"v":"프로바이더 등록과 사용","c":[{"t":"fence","d":4,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// cats.service.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@nestjs/common'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Cat <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./interfaces/cat.interface'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CatsService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> cats<span class=\"token operator\">:</span> Cat<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">create</span><span class=\"token punctuation\">(</span>cat<span class=\"token operator\">:</span> Cat<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cats<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Cat<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cats<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"fence","d":4,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// cats.controller.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Controller<span class=\"token punctuation\">,</span> Get<span class=\"token punctuation\">,</span> Post<span class=\"token punctuation\">,</span> Body <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@nestjs/common'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> CreateCatDto <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./dto/create-cat.dto'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> CatsService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./cats.service'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Cat <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./interfaces/cat.interface'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Controller</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'cats'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CatsController</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> catsService<span class=\"token operator\">:</span> CatsService<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Post</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Body</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> createCatDto<span class=\"token operator\">:</span> CreateCatDto<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>catsService<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>createCatDto<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Get</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>Cat<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>catsService<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":4,"p":{"lines":[390,391]},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[390,391]},"v":"위처럼 <code>@injectable</code>로 클래스를 감싸주면 의존성을 주입할 수 있다는 것을 nestJS에게 알려주게 된다."}]},{"t":"fence","d":4,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// 속성 기반 주입</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceB</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> _serviceA<span class=\"token operator\">:</span> ServiceA<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>_serviceA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">doSomeFuncFromA</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"fence","d":4,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// 속성 기반 주입 using @Inject</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BaseService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Inject</span></span><span class=\"token punctuation\">(</span>ServiceA<span class=\"token punctuation\">)</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> serviceA<span class=\"token operator\">:</span> ServiceA<span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">...</span>\n\n    <span class=\"token function\">doSomeFuncFromA</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>serviceA<span class=\"token punctuation\">.</span><span class=\"token function\">getHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":4,"p":{"lines":[415,417]},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[415,416]},"v":"ME: 위 코드들을 보면 신기한 점이 있음. services를 인스턴스화 시키지 않았음에도 사용될 수 있는건 nest가 <code>@injectable</code>를 module에서 <code>provider</code>로 지정했을 때 의존성 주입과 함께 인스턴스화 시키는 거로 보임.(추측)"}]}]},{"t":"heading","d":3,"p":{"lines":[417,418]},"v":"스코프","c":[{"t":"list_item","d":5,"p":{"lines":[419,420]},"v":"<strong><em><em>멀티 테넌시</em></em></strong>","c":[{"t":"list_item","d":7,"p":{"lines":[420,421]},"v":"하나의 인스턴스가 여러 사용자에게 각각 다르게 동작하도록 하는 SW 아키텍쳐."},{"t":"list_item","d":7,"p":{"lines":[421,422]},"v":"반대로 각 사용자마자 인스턴스가 새로 만들어지는 것은 <strong><em><em>멀티 인스턴스</em></em></strong> 방식"}]},{"t":"list_item","d":5,"p":{"lines":[422,423]},"v":"DEFAULT: 싱글톤 인스턴스가 전체 어플리케이션에서 공유 됨. 인스턴스 수명 === 어플리케이션면수명, 부트 스트랩(시스템이 구동 되는 것) 과정을 마치면 모든 싱글톤 프로바이더의 인스턴스가 만들어짐."},{"t":"list_item","d":5,"p":{"lines":[423,424]},"v":"REQUEST: 들어오는 요청마다 별도의 인스턴스가 생성됨. 요청을 처리하고 나면 쓰레기 수집 됨."},{"t":"list_item","d":5,"p":{"lines":[424,425]},"v":"TRANSIENT: 임시 프로바이더를 주입하는 각 컴포넌트는 새로 생성된 전용 인스턴스를 주입받게 됨."},{"t":"list_item","d":5,"p":{"lines":[425,426]},"v":"Provider, Controller에 각각의 Scope를 지정할 수 있음."},{"t":"list_item","d":5,"p":{"lines":[426,427]},"v":"Controller -&gt; Service -&gt; Repository 와 같은 종속성 그래프에서 Service가 REQUEST이고 나머지는 DEFAULT일 때, Controller는 Service를 의존하므로 REQUEST가 됨. 그렇지만 Repository는 의존하지 않으므로 DEFAULT."}]},{"t":"heading","d":3,"p":{"lines":[428,429]},"v":"커스텀 프로바이더","c":[{"t":"heading","d":4,"p":{"lines":[429,430]},"v":"Value Provider","c":[{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// 모의 객체 선언</span>\n<span class=\"token keyword\">const</span> mockCatsService <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/* 테스트에 적용할 값을 변경한다\n...\n*/</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Module</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\nimports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>CatsModule<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\nproviders<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    provide<span class=\"token operator\">:</span> CatsService<span class=\"token punctuation\">,</span>\n    useValue<span class=\"token operator\">:</span> mockCatsService<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[449,451]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[449,450]},"v":"<code>Provider</code>는 <code>CatsService</code>를 지정하지만, 실제 값은 <code>mockCatsService</code>를 사용하겠다는 것."},{"t":"list_item","d":6,"p":{"lines":[450,451]},"v":"ME: <code>absctract class</code>를 <code>provide</code>로 지정하고 사용 될 <code>class</code>를 <code>useValue</code>로 사용하면 좀 더 결합성이 많이 느슨해질지도?"}]}]},{"t":"heading","d":4,"p":{"lines":[451,452]},"v":"Class Provider","c":[{"t":"bullet_list","d":5,"p":{"lines":[452,453]},"v":""},{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> configServiceProvider <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  provide<span class=\"token operator\">:</span> ConfigService<span class=\"token punctuation\">,</span>\n  useClass<span class=\"token operator\">:</span>\n    process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'development'</span>\n      <span class=\"token operator\">?</span> DevelopmentConfigService\n      <span class=\"token operator\">:</span> ProductionConfigService<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Module</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  providers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>configServiceProvider<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[467,470]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[467,468]},"v":"위처럼 <code>ConfigService</code>를 사용(참조?)하면서 실제 클래스는 <code>useClass</code>로 지정해줌."},{"t":"list_item","d":6,"p":{"lines":[468,469]},"v":"ME: 노드 환경을 dev, prov, def 등등을 지정해줄 때 용이할 듯."},{"t":"list_item","d":6,"p":{"lines":[469,470]},"v":"ME: 혹은 추상화 시킬 때도 좋을 것 같음."}]}]},{"t":"heading","d":4,"p":{"lines":[470,471]},"v":"Factory Provider","c":[{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> connectionFactory <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  provide<span class=\"token operator\">:</span> <span class=\"token string\">'CONNECTION'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">useFactory</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>optionsProvider<span class=\"token operator\">:</span> OptionsProvider<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> optionsProvider<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DatabaseConnection</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  inject<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>OptionsProvider<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Module</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  providers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>connectionFactory<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[486,488]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[486,487]},"v":"<strong><em>함수 실행 과정 중 다른 provider가 필요하다면</em></strong> 주입받아 사용할 수 있음."}]}]},{"t":"heading","d":4,"p":{"lines":[488,489]},"v":"Alias provider","c":[{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> loggerAliasProvider <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  provide<span class=\"token operator\">:</span> <span class=\"token string\">'AliasedLoggerService'</span><span class=\"token punctuation\">,</span>\n  useExisting<span class=\"token operator\">:</span> LoggerService<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Module</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n  providers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>LoggerService<span class=\"token punctuation\">,</span> loggerAliasProvider<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//----------------------------------------------------</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Controller</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppController</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>\n    <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Inject</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'AliasedLoggerService'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> serviceAlias<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Get</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'/alias'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">getHelloAlias</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>serviceAlias<span class=\"token punctuation\">.</span><span class=\"token function\">getHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[514,515]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[514,515]},"v":"위처럼 다른 이름으로 별칭을 목적으로 사용될 수 있음."}]}]},{"t":"heading","d":4,"p":{"lines":[515,516]},"v":"export","c":[{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> connectionFactory <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  provide<span class=\"token operator\">:</span> <span class=\"token string\">'CONNECTION'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">useFactory</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>optionsProvider<span class=\"token operator\">:</span> OptionsProvider<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> optionsProvider<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DatabaseConnection</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  inject<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>OptionsProvider<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Module</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  providers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>connectionFactory<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  exports<span class=\"token operator\">:</span> connectionFactory<span class=\"token punctuation\">,</span> <span class=\"token comment\">/* or ['CONNECTION'] */</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[532,534]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[532,533]},"v":"다른 모듈을 사용하려면 해당 모듈에서 <code>export</code>를 해주어야 함. 이는 토큰으로 내보낼 수도 있음."}]}]}]}]},{"t":"heading","d":2,"p":{"lines":[534,535]},"v":"SW복잡도를 낮추기 위한 모듈 설계","c":[{"t":"heading","d":3,"p":{"lines":[535,536]},"v":"모듈 - 응집성 있는 설계","c":[{"t":"heading","d":4,"p":{"lines":[536,537]},"v":"모듈 다시 내보내기","c":[{"t":"list_item","d":6,"p":{"lines":[537,538]},"v":"imports, exports로만 만들어진 모듈로 디펜던시 트리를 잘 정립할 수 있다."}]},{"t":"heading","d":4,"p":{"lines":[538,539]},"v":"전역 모듈","c":[{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Global</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Module</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  providers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>CommonService<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  exports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>CommonService<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CommonModule</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[547,548]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[547,548]},"v":"헬퍼나 DB 연결 같은 전역적으로 사용 될 모듈은 Global로 지정할 수 있다."}]}]}]}]},{"t":"heading","d":2,"p":{"lines":[548,549]},"v":"동적 모듈을 활용한 환경변수 구성","c":[{"t":"heading","d":3,"p":{"lines":[549,550]},"v":"동적 모듈","c":[{"t":"list_item","d":5,"p":{"lines":[550,551]},"v":"모듈을 인스턴스화 할 때 값을 다르게하여 동적으로 인스턴스화 해줌"},{"t":"list_item","d":5,"p":{"lines":[551,552]},"v":"대표적으로 Config가 있음."}]},{"t":"heading","d":3,"p":{"lines":[552,553]},"v":"dotenv를 이용한 Config 설정","c":[{"t":"list_item","d":5,"p":{"lines":[553,554]},"v":"ME: Keep."}]},{"t":"heading","d":3,"p":{"lines":[554,555]},"v":"Nest에서 제공하는 Config 패키지","c":[{"t":"fence","d":4,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token operator\">...</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ConfigModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@nestjs/config'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Module</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  imports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>ConfigModule<span class=\"token punctuation\">.</span><span class=\"token function\">forRoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppModule</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":4,"p":{"lines":[565,566]},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[565,566]},"v":"<code>forRoot()</code> 함수는 동적 모듈을 리턴하는 정적 메서드."}]}]},{"t":"heading","d":3,"p":{"lines":[566,567]},"v":"유저서비스에 환경변수 구성하기","c":[{"t":"list_item","d":5,"p":{"lines":[567,568]},"v":"<code>joi</code> 라이브러리 - 환경변수 유효성 검사에 사용 됨","c":[{"t":"list_item","d":7,"p":{"lines":[568,569]},"v":"ME: 주로 외부 모듈 이야기로 구성 되어있으므로 스킵"}]}]},{"t":"heading","d":3,"p":{"lines":[569,570]},"v":"IoC와 DI","c":[{"t":"heading","d":4,"p":{"lines":[570,571]},"v":"IoC ?","c":[{"t":"bullet_list","d":5,"p":{"lines":[571,572]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[571,572]},"v":"제어의 역전"}]},{"t":"fence","d":5,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UsersController</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> usersService<span class=\"token operator\">:</span> UsersService<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"bullet_list","d":5,"p":{"lines":[578,580]},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[578,579]},"v":"컨트롤러가 <code>UserService</code>를 사용하고 있지만 라이프 사이클에는 전혀 관여하지 않는다."},{"t":"list_item","d":6,"p":{"lines":[579,580]},"v":"내부 구조를 모르며 그저 가져다 쓸 뿐이다. 이 역할이 <code>IoC</code>라고 한다."}]}]},{"t":"heading","d":4,"p":{"lines":[580,581]},"v":"DI ?","c":[{"t":"list_item","d":6,"p":{"lines":[581,582]},"v":"의존성 주입"},{"t":"list_item","d":6,"p":{"lines":[582,583]},"v":"의존성을 IoC 컨테이너가 주입해준다."},{"t":"list_item","d":6,"p":{"lines":[583,584]},"v":"자세히 말하면 IoC 컨테이너가 직접 객체의 생명주기를 관리해주는 방식."}]}]}]},{"t":"heading","d":2,"p":{"lines":[585,586]},"v":"파이프와 유효성 검사 - 요청이 제대로 전달되었는가","c":[{"t":"heading","d":3,"p":{"lines":[586,587]},"v":"파이프","c":[{"t":"list_item","d":5,"p":{"lines":[587,588]},"v":"파이프는 미들웨어와 유사함."},{"t":"list_item","d":5,"p":{"lines":[588,589]},"v":"미들웨어와의 차이점은 순서."},{"t":"list_item","d":5,"p":{"lines":[589,590]},"v":"다음과 같은 두가지 목적으로 사용됨.","c":[{"t":"list_item","d":7,"p":{"lines":[590,592]},"v":"","c":[{"t":"ordered_list","d":8,"p":{"lines":[590,591],"start":1},"v":"","c":[{"t":"list_item","d":9,"p":{"lines":[590,591],"index":1},"v":"1. 변환: 입력데이터를 원하는 형식으로 변환"}]},{"t":"bullet_list","d":8,"p":{"lines":[591,592]},"v":"","c":[{"t":"list_item","d":9,"p":{"lines":[591,592]},"v":"<code>/users/user/1</code> 내의 경로 파라메터 문자열 <code>1</code>을 숫자로환변환"}]}]},{"t":"list_item","d":7,"p":{"lines":[592,593]},"v":"","c":[{"t":"list_item","d":9,"p":{"lines":[592,593],"index":2},"v":"2. 유효성 검사: 입력데이터가 사용자가 정한 기준에 유효하지 않은 경우 예외 처리"}]}]},{"t":"list_item","d":5,"p":{"lines":[593,594]},"v":"<code>@nest/common</code>에는 다음과 같은 내장 파이프가 마련되어있음.","c":[{"t":"list_item","d":7,"p":{"lines":[594,595]},"v":"ValidationPipe"},{"t":"list_item","d":7,"p":{"lines":[595,596]},"v":"ParseIntPipe"},{"t":"list_item","d":7,"p":{"lines":[596,597]},"v":"ParseBoolPipe"},{"t":"list_item","d":7,"p":{"lines":[597,598]},"v":"ParseArrayPipe"},{"t":"list_item","d":7,"p":{"lines":[598,599]},"v":"ParseUUIDPipe"},{"t":"list_item","d":7,"p":{"lines":[599,600]},"v":"DefaultValuePipe"}]},{"t":"list_item","d":5,"p":{"lines":[600,601]},"v":"ME: <code>express</code>를 사용하면서 <code>middleware</code>의 순서에 대해 궁금한 점이 많았는데 이를 nest가 해소한 듯 하다. <code>pipe</code> 외에 <code>guard</code>, <code>gateway</code> 등 사실 모두 <code>express</code>의 <code>middleware</code>와 다를 바 없지만 순서라는 약속을 한 것 뿐으로 보인다."}]},{"t":"heading","d":3,"p":{"lines":[601,602]},"v":"파이프의 내부 구현 이해하기","c":[{"t":"bullet_list","d":4,"p":{"lines":[602,603]},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[602,603]},"v":"PipeTransform을 상속받아서 정의해주면 된다."}]},{"t":"fence","d":4,"v":"<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PipeTransform<span class=\"token punctuation\">,</span> Injectable<span class=\"token punctuation\">,</span> ArgumentMetadata <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@nestjs/common'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ValidationPipe</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">PipeTransform</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">transform</span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> metadata<span class=\"token operator\">:</span> ArgumentMetadata<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>metadata<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]}]},{"t":"heading","d":2,"p":{"lines":[614,615]},"v":"영속화 - 데이터를 기록하고 다루기"}]})</script>
</body>
</html>
